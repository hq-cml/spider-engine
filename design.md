# 开发文档：
### 整体架构如图：
![架构图](./img/spider-engine-struct.png)

### 概念解释与对齐：
	对于存储引擎，很多概念相对类似、通用，但又有些许区别，比如同一个这里详细解释一下。
- 文档：存储的基本单位，是一条结构化了的数据，对等的，可以理解为Mysql表中的一条记录。
- 倒排：SE的底层存储结构，一个文档的字符内容，被分词之后，会形成多个词条，倒排就是一种映射关系，Map：词条=>文档Id。有了这个倒排映射，那么搜索功能将变得简单高效。
- 正排：SE的底层存储结构，相对于倒排的逆映射，文档Id=>字段内容。这主要用于结果的过滤以及完整文档的生成，例如一个文档的所有字段的正排合在一起，就是一个完整的文档内容。
- 字段：文档的基本组成单位，一个文档由多个字段组成，这和Mysql中的概念是一致的。在spider-engine中，每个字段都会拥有一个正排；字符类型的字段，可以拥有倒排。
- 索引过程：将文档数据各个字段生成可供搜索的倒排索引和正排索引的过程就是索引过程。在spider-engine中，当增加一个文档后，这一过程将自动进行。
- 表：类比于Mysql的表，多个拥有相同字段定义的文档，组成一张表。
- 库：类比于Mysql的库，表的管理容器，多个表组成一个库。
- 分区：类比于Mysql的分区，底层的存储结构，整体表的一部分数据（为了将来分布式、数据容错、数据迁移等预留想想空间），本质上一个分区就已经拥有完整的索引套件：正排+倒排+字段。能够执行独立的搜索，最终的搜索结果其实是各个分区独立搜索结果的并集。
- 检索：即搜索，即给定一个关键词或一句话，针对某个字段进行搜索。通常还会伴有过滤和排序等操作。本质上底层会用到倒排索引+正排索引。



### 倒排的实现：

使用MMAP方式进行数据存储和读取
使用B+树进行字典和key的存储


### 正排的实现：

### 分区的实现：

### 分词的实现：
依赖jiebago和sego

### 排序：
默认使用文本相关性进行排序